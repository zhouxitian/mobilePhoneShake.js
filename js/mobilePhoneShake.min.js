/**
 * mobilePhoneShake
 * https://github.com/zhouxitian/mobilePhoneShake.js
 * author:zhouxitian@163.com
 */
!function(a){var b={addEvent:function(b,c,d,e){if(b.addEventListener)try{b.addEventListener(c,d,!!e)}catch(f){if("object"!=typeof d||!d.handleEvent)throw f;b.addEventListener(c,function(a){d.handleEvent.call(d,a)},!!e)}else b.attachEvent?"object"==typeof d&&d.handleEvent?b.attachEvent("on"+c,function(){d.handleEvent.call(d)}):(b["e"+c+d]=d,b[c+d]=function(){b["e"+c+d](a.event)},b.attachEvent("on"+c,b[c+d])):b["on"+c]=d},removeEvent:function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,!!d):a.detachEvent?(a.detachEvent("on"+b,a[b+c]),a[b+c]=null):a["on"+b]=null},extend:function(a,b){for(var c in b)a.hasOwnProperty(c)?"object"==typeof b[c]?arguments.callee(a[c],b[c]):a[c]=b[c]:a[c]=b[c];return a},deviceMotionHandler:function(a){var b=a.accelerationIncludingGravity,h=(new Date).getTime();if(h-c>100){var i=h-c;c=h;var j=b.x,k=b.y,l=b.z,m=1e4*(Math.abs(j+k+l-d-e-f)/i);m>g.speed&&g.callback&&g.callback(j,k,l),g.onchange&&g.onchange(j,k,l),d=j,e=k,f=l}}},c=0,d=0,e=0,f=0,g={speed:800,onchange:null,callback:null};mobilePhoneShake=function(a){b.extend(g,a)},mobilePhoneShake.prototype={start:function(){a.DeviceMotionEvent?b.addEvent(a,"devicemotion",b.deviceMotionHandler):alert("not support mobile event")},stop:function(){a.DeviceMotionEvent?b.removeEvent(a,"devicemotion",b.deviceMotionHandler):alert("not support mobile event")}}}(window);